<div id="header">

# <span class="image image-doc-icon">![Rules executor transform Icon](../assets/images/transforms/icons/rules_exec.svg)</span> Rules executor

</div>

<div id="content">

<div id="preamble">

<div class="sectionbody">

<table>
<colgroup>
<col style="width: 75%" />
<col style="width: 25%" />
</colgroup>
<tbody>
<tr class="odd">
<td><div class="content">
<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Rules Executor allows fields of incoming rows to be executed against a rule set. This may be useful to determine additional information or route rows onto another transform.</p>
</div>
<div class="paragraph">
<p><a href="https://www.drools.org/">Drools</a> is the present rule engine implementation and its <a href="https://docs.drools.org/7.68.0.Final/drools-docs/html_single/index.html#_droolslanguagereferencechapter">rule language</a> can be referenced for use by this transform. <a href="https://docs.drools.org/7.68.0.Final/drools-docs/html_single/index.html#_welcome">Drools documentation</a></p>
</div>
</div>
</div>
</div></td>
<td><div class="content">
<div class="sect1">
<h2 id="_supported_engines">Supported Engines</h2>
<div class="sectionbody">
<table>
<tbody>
<tr class="odd">
<td><p>Hop Engine</p></td>
<td><div class="content">
<div class="paragraph">
<p><span class="image"><img src="../assets/images/check_mark.svg" alt="Supported" width="24" /></span></p>
</div>
</div></td>
</tr>
<tr class="even">
<td><p>Spark</p></td>
<td><div class="content">
<div class="paragraph">
<p><span class="image"><img src="../assets/images/question_mark.svg" alt="Maybe Supported" width="24" /></span></p>
</div>
</div></td>
</tr>
<tr class="odd">
<td><p>Flink</p></td>
<td><div class="content">
<div class="paragraph">
<p><span class="image"><img src="../assets/images/question_mark.svg" alt="Maybe Supported" width="24" /></span></p>
</div>
</div></td>
</tr>
<tr class="even">
<td><p>Dataflow</p></td>
<td><div class="content">
<div class="paragraph">
<p><span class="image"><img src="../assets/images/question_mark.svg" alt="Maybe Supported" width="24" /></span></p>
</div>
</div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div></td>
</tr>
</tbody>
</table>

</div>

</div>

<div class="sect1">

## Details

<div class="sectionbody">

<div class="paragraph">

For each row processed by the Rules Executor transform each column is converted to a *Rules.Column* then injected into the rule engine and executed against the rules set. *Rules.Column* contains four properties:

</div>

<div class="paragraph">

*externalSource*: boolean property indicating if this Rules.Column was injected from an external source (a field from a processed row)

</div>

<div class="paragraph">

*name*: name of this field

</div>

<div class="paragraph">

*type*: type of data stored in payload (one of ValueMetaInterface.typeCodes - Number, String, Integer, Date, Boolean, etc…​)

</div>

<div class="paragraph">

*payload*: value of this field

</div>

<div class="paragraph">

Results are generated by creating Rules.Column objects. The transform is configured to pick up these generated objects by name.

</div>

<div class="sect2">

### Rules Tab

<div class="paragraph">

The *Rules* tab is where you enter your rule definition or a reference to the rule file..

</div>

| Option                  | Description |
| ----------------------- | ----------- |
| Rules filename          |             |
| Rules script to execute |             |

</div>

<div class="sect2">

### Rules result Tab

<div class="paragraph">

Rules result tab defines the layout of the Rules output fields.

</div>

| Option             | Description |
| ------------------ | ----------- |
| Result column name |             |
| Result column type |             |

</div>

</div>

</div>

<div class="sect1">

## Example

<div class="sectionbody">

<div class="paragraph">

All Rule Definitions should contain "import org.apache.hop.pipeline.transforms.drools.Rules.Column;" to give access to the Rules.Column class.

</div>

<div class="paragraph">

For the input row: fica\_seed (Integer), hi (String), fica (Integer); three Rules.Column objects will be created in the Rules Engine:

</div>

| Rules.Row→row (Map) | Type    | Payload      |
| ------------------- | ------- | ------------ |
| fica\_seed          | Integer | \-3561151667 |
| hi                  | String  | test         |
| fica                | Integer | bad          |

<div class="paragraph">

Rules can be defined and applied:

</div>

<div class="listingblock">

<div class="content">

``` highlight
rule "Decline"
    dialect "mvel"
    when
        $fica : Column(name == "fica", payload < 550)

    then
        Column approvalStatus = new Column();
        approvalStatus.name = "approvalStatus"
        approvalStatus.type = String.class
        approvalStatus.payload = "declined"

        Column approvalClassification = new Column();
        approvalClassification.name = "approvalClass"
        approvalClassification.type = String.class
        approvalClassification.payload = "Declined: fica too low"

        insert(approvalStatus);
        insert(approvalClassification);

        System.out.println("Declined");
end
```

</div>

</div>

<div class="paragraph">

Rules.Column properties can be checked as in the above’s left hand side.

</div>

<div class="paragraph">

Rules.Column objects can be created for pickup as in the above’s right hand side.

</div>

<div class="paragraph">

The transform can be told to pickup a generated Rules.Column object by defining the Rules.Column name in the transform’s Results tab. Type conversions can be applied by setting the Result column type as well.

</div>

</div>

</div>

</div>

<div id="footer">

<div id="footer-text">

Last updated 2025-09-04 18:22:57 +0200

</div>

</div>
