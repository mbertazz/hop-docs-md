<div id="header">

# Get a file with SFTP

</div>

<div id="content">

<div class="sect1">

## Description

<div class="sectionbody">

<div class="paragraph">

The `Get a file with SFTP` action retrieves one or more files from an FTP server using the Secure FTP protocol.

</div>

<div class="paragraph">

The action returns true if the specified file(s) or pattern were retrieved successfully, false it there were problems retrieving the file(s).

</div>

<div class="admonitionblock tip">

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><div class="title">
Tip
</div></td>
<td>If you run into a <code>Algorithm Negotiation Fail</code> error when connecting to your SFTP server, check the <a href="#negotiation_error">Algorithm Negotiation Fail Error</a> section at the end of this page.</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>

<div class="sect1">

## Options

<div class="sectionbody">

<div class="sect2">

### General tab

<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="header">
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Action name</p></td>
<td><p>The name of the workflow action.</p></td>
</tr>
<tr class="even">
<td><p>SFTP-server name / IP</p></td>
<td><p>The name of the SFTP server or the IP address</p></td>
</tr>
<tr class="odd">
<td><p>Port</p></td>
<td><p>The TCP port to use. This is usually 22</p></td>
</tr>
<tr class="even">
<td><p>User name</p></td>
<td><p>The user name to log into the SFTP server</p></td>
</tr>
<tr class="odd">
<td><p>Password</p></td>
<td><p>The password to log into the SFTP server</p></td>
</tr>
<tr class="even">
<td><p>Use private keyfile</p></td>
<td><p>Indicates whether or not a private keyfile is to be used.</p></td>
</tr>
<tr class="odd">
<td><p>Private key filename</p></td>
<td><p>If <em>Use private keyfile</em> is checked then this field is enabled. The file can be browsed to using the browse button to the right of the field. The Private Key should be in the PEM file format. For PuTTY-based Private Keys, use PuTTYgen to convert the file into &quot;OpenSSH&quot; format.</p></td>
</tr>
<tr class="even">
<td><p>Key passphrase</p></td>
<td><p>If <em>Use private keyfile</em> is checked then this field is enabled. If a passphrase is required then enter it here.</p></td>
</tr>
<tr class="odd">
<td><p>Proxy type</p></td>
<td><div class="content">
<div class="paragraph">
<p>The type of proxy to use for the connection. The available options are:</p>
</div>
<div class="ulist">
<ul>
<li><p>blank (no proxy, default)</p></li>
<li><p>HTTPS</p></li>
<li><p>SOCKS5</p></li>
</ul>
</div>
</div></td>
</tr>
<tr class="even">
<td><p>Proxy host</p></td>
<td><p>The proxy host to use for the connection</p></td>
</tr>
<tr class="odd">
<td><p>Proxy username</p></td>
<td><p>The proxy username to use for the connection</p></td>
</tr>
<tr class="even">
<td><p>Proxy password</p></td>
<td><p>The proxy password to use for the connection</p></td>
</tr>
<tr class="odd">
<td><p>Compression</p></td>
<td><div class="content">
<div class="paragraph">
<p>The compression to use for this SFTP connection. The available options are</p>
</div>
<div class="ulist">
<ul>
<li><p>none (default)</p></li>
<li><p>zlib</p></li>
</ul>
</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<div class="sect2">

### Files tab

Option

</div>

</div>

</div>

</div>

Description

**Source files**

Copy previous results to args

If the files to retrieve are dynamically generated by another pipeline, check this option. Hop will select files list from previous result rows (not result files) and search for these files.

The first field in the results will be used for the search and must contain the file names only, not full or partial paths: all files will be searched in the *remote directory* defined below.

Remote Directory

The remote directory on the SFTP server from which the files will be retrieved. Use the *Test folder* button to connect to the remote server and validate that the folder exists.

Wildcard (regular expression)

<div class="content">

<div class="paragraph">

Specify a regular expression here if you want to select multiple files. This field is disabled if the *Copy previous results to args* flag above is enabled.

</div>

<div class="paragraph">

Examples of regular expressions:

</div>

<div class="listingblock">

<div class="content">

``` highlight
.*txt$   : get all text files
A.*[ENG:0-9].txt  : files tarting with A, ending with a number and .txt
```

</div>

</div>

</div>

Remove files after retrieval

Check this flag to delete the remote file after it is downloaded. Be aware that usually this operation cannot be undone\!

**Target files**

Target Directory

The directory on the machine on which Hop runs in which you want to place the transferred files

Create target folder

Check this option if the destination folder does not exist and should be created.

Add filenames to result

If checked the information about downloaded files is added to the result files stream.

<div class="sect1">

## Algorithm Negotiation Fail Error

<div class="sectionbody">

<div class="paragraph">

If your `Get a file with SFTP` action returns an error message like the one below, you (or the server you are connecting to) are probably using key types that are considered unsafe in the dependencies used by this action in recent Apache Hop versions.

</div>

<div class="paragraph">

`com.jcraft.jsch.JSchhAlgoNegoFailException: Algorithm negotiation fail…​`

</div>

<div class="paragraph">

The better and more secure option is to upgrade your keys to more secure types. However, you can still connect to this SFTP server by adding the options below to the `HOP_OPTIONS` variable in your startup command (in `hop-gui.sh/bat` or `hop-run.sh/bat`, or in your `HOP_OPTIONS` environment variable):

</div>

<div class="paragraph">

`-Djsch.client_pubkey=ssh-rsa,ssh-ed25519,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,rsa-sha2-512,rsa-sha2-256 -Djsch.server_host_key=ssh-ed25519,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,rsa-sha2-512,rsa-sha2-256,ssh-rsa`

</div>

</div>

</div>

<div id="footer">

<div id="footer-text">

Last updated 2025-09-04 18:24:26 +0200

</div>

</div>
