<div id="header">

# Put a file with SFTP

</div>

<div id="content">

<div class="sect1">

## Description

<div class="sectionbody">

<div class="paragraph">

The `Put a file with SFTP` action pushes one or more files to an SFTP server using the Secure FTP protocol.

</div>

<div class="paragraph">

The action returns true if the specified file(s) or pattern were uploaded successfully, false it there were problems uploading the file(s).

</div>

<div class="admonitionblock tip">

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><div class="title">
Tip
</div></td>
<td>If you run into a <code>Algorithm Negotiation Fail</code> error when connecting to your SFTP server, check the <a href="#negotiation_error">Algorithm Negotiation Fail Error</a> section at the end of this page.</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>

<div class="sect1">

## Options

<div class="sectionbody">

<div class="sect2">

### General Tab

<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="header">
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Workflow action name</p></td>
<td><p>The name of the workflow action. <strong>Note</strong>: This name has to be unique in a single workflow. A workflow action can be placed several times on the canvas, however it will be the same workflow action.</p></td>
</tr>
<tr class="even">
<td><p>SFTP-server name (IP)</p></td>
<td><p>The name of the SFTP server or the IP address.</p></td>
</tr>
<tr class="odd">
<td><p>SFTP port</p></td>
<td><p>The TCP port to use. This is usually 22.</p></td>
</tr>
<tr class="even">
<td><p>User name</p></td>
<td><p>The user name to log into the SFTP server.</p></td>
</tr>
<tr class="odd">
<td><p>Password</p></td>
<td><p>The password to log into the SFTP server.</p></td>
</tr>
<tr class="even">
<td><p>Use private keyfile</p></td>
<td><p>Indicates whether or not a private keyfile is to be used.</p></td>
</tr>
<tr class="odd">
<td><p>Private key filename</p></td>
<td><p>If <code>Use private keyfile</code> is checked then this field is enabled. The file can be browsed to using the browse button to the right of the field. The Private Key should be in the PEM file format. For PuTTY-based Private Keys, use PuTTYgen to convert the file into OpenSSH format.</p></td>
</tr>
<tr class="even">
<td><p>Key passphrase</p></td>
<td><p>If <code>Use private keyfile</code> is checked then this field is enabled. If a passphrase is required then enter it here.</p></td>
</tr>
<tr class="odd">
<td><p>Proxy type</p></td>
<td><p>The proxy type (SOCKS5, HTTP) of the specified proxy server.</p></td>
</tr>
<tr class="even">
<td><p>Proxy host</p></td>
<td><p>The host name or the IP address of the proxy server.</p></td>
</tr>
<tr class="odd">
<td><p>Proxy port</p></td>
<td><p>The port of the proxy server to connect to.</p></td>
</tr>
<tr class="even">
<td><p>Proxy username</p></td>
<td><p>The username to log into the proxy server as.</p></td>
</tr>
<tr class="odd">
<td><p>Proxy password</p></td>
<td><p>The password associated with <code>Proxy username</code>.</p></td>
</tr>
<tr class="even">
<td><p>Compression</p></td>
<td><div class="content">
<div class="paragraph">
<p>The compression to use in the file transfer. Current options are</p>
</div>
<div class="ulist">
<ul>
<li><p>none (default)</p></li>
<li><p>zlib</p></li>
</ul>
</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<div class="sect2">

### Files tab

Option

</div>

</div>

</div>

</div>

Description

**Source (local) files**

Copy previous results to args

If the name of the files to send are dynamically generated as a result by another pipeline, check this option. Hop will select the files list from previous result rows (not result files, see next option) and send these files.

Only the first field in the results will be used to identify the files to send: if a file cannot be found, Hop will ignore it.

Copy previous result files to args

If the files to send are dynamically generated by another pipeline or workflow action, check this option. Hop will select the files list from previous result files stream and send these files. If a file cannot be found, Hop will ignore it.

Local directory

The directory on the machine on which Hop runs where the files to upload reside

Wildcard (regular expression)

<div class="content">

<div class="paragraph">

Specify a regular expression here if you want to select multiple files. This option is disabled if either one of `Copy previous results to args` or `Copy previous result files to args` is enabled.

</div>

<div class="paragraph">

Examples of regular expressions:

</div>

<div class="listingblock">

<div class="content">

``` highlight
.*txt$   : get all text files
A.*[ENG:0-9].txt  : files starting with A, ending with a number and .txt
```

</div>

</div>

</div>

Success when no file

Check this option if the workflow action has to succeed when there are no files to process, otherwise the workflow will fail.

After SFTP Put

<div class="content">

<div class="paragraph">

Action to take after the file is transferred. The available options are:

</div>

<div class="ulist">

  - Do nothing (default)

  - Delete file

  - Move file to

</div>

</div>

Destination folder

Enabled if the `After SFTP Put` option above is set to `Move file to`. The destination on the source file for the move is specified here. Use to browse button to browse to destination folder.

Create destination folder

Enabled if `After SFTP Put` is set to `Move file to`. If the `Destination folder` does not exists check this option to create it.

Add filename to to result

Enabled if `After SFTP Put` is seet to `Do nothing`. If checked the name of the file is added to the result stream.

**Target (remote) folder**

Remote directory

The remote directory on the SFTP server in which the files will be uploaded. Use the `Test folder` button to connect to the remote server and validate that the folder exists.

Create folder

Check this option if the destination folder does not exist and should be created.

<div class="sect1">

## Algorithm Negotiation Fail Error

<div class="sectionbody">

<div class="paragraph">

If your `Put a file with SFTP` action returns an error message like the one below, you (or the server you are connecting to) are probably using key types that are considered unsafe in the dependencies used by this action in recent Apache Hop versions.

</div>

<div class="paragraph">

`com.jcraft.jsch.JSchhAlgoNegoFailException: Algorithm negotiation fail…​`

</div>

<div class="paragraph">

The better and more secure option is to upgrade your keys to more secure types. However, you can still connect to this SFTP server by adding the options below to the `HOP_OPTIONS` variable in your startup command (in `hop-gui.sh/bat` or `hop-run.sh/bat`, or in your `HOP_OPTIONS` environment variable):

</div>

<div class="paragraph">

`-Djsch.client_pubkey=ssh-rsa,ssh-ed25519,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,rsa-sha2-512,rsa-sha2-256 -Djsch.server_host_key=ssh-ed25519,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,rsa-sha2-512,rsa-sha2-256,ssh-rsa`

</div>

</div>

</div>

<div id="footer">

<div id="footer-text">

Last updated 2025-09-04 18:24:26 +0200

</div>

</div>
